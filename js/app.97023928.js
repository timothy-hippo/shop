(function(t){function e(e){for(var n,r,i=e[0],s=e[1],u=e[2],d=0,l=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&l.push(o[r][0]),o[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);b&&b(e);while(l.length)l.shift()();return a.push.apply(a,u||[]),c()}function c(){for(var t,e=0;e<a.length;e++){for(var c=a[e],n=!0,r=1;r<c.length;r++){var i=c[r];0!==o[i]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=c[0]))}return t}var n={},r={app:0},o={app:0},a=[];function i(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-2d2086b7":"8ff83315","chunk-378034bd":"89c0d394","chunk-5caeaaa2":"4804ebd3","chunk-7afd838d":"f20bf0d2","chunk-ad7fbcd0":"cebece02","chunk-2d0ab565":"610b862e","chunk-445d0efa":"398261ef","chunk-90062de2":"d1114bbf","chunk-b7914530":"13dafecc","chunk-252cd720":"e53b2af1","chunk-2d0e2308":"ba97b87b"}[t]+".js"}function s(e){if(n[e])return n[e].exports;var c=n[e]={i:e,l:!1,exports:{}};return t[e].call(c.exports,c,c.exports,s),c.l=!0,c.exports}s.e=function(t){var e=[],c={"chunk-90062de2":1,"chunk-252cd720":1};r[t]?e.push(r[t]):0!==r[t]&&c[t]&&e.push(r[t]=new Promise((function(e,c){for(var n="css/"+({}[t]||t)+"."+{"chunk-2d2086b7":"31d6cfe0","chunk-378034bd":"31d6cfe0","chunk-5caeaaa2":"31d6cfe0","chunk-7afd838d":"31d6cfe0","chunk-ad7fbcd0":"31d6cfe0","chunk-2d0ab565":"31d6cfe0","chunk-445d0efa":"31d6cfe0","chunk-90062de2":"475f97b2","chunk-b7914530":"31d6cfe0","chunk-252cd720":"7e199fec","chunk-2d0e2308":"31d6cfe0"}[t]+".css",o=s.p+n,a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var u=a[i],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===n||d===o))return e()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){u=l[i],d=u.getAttribute("data-href");if(d===n||d===o)return e()}var b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.onload=e,b.onerror=function(e){var n=e&&e.target&&e.target.src||o,a=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=n,delete r[t],b.parentNode.removeChild(b),c(a)},b.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(b)})).then((function(){r[t]=0})));var n=o[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,c){n=o[t]=[e,c]}));e.push(n[2]=a);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=i(t);var l=new Error;u=function(e){d.onerror=d.onload=null,clearTimeout(b);var c=o[t];if(0!==c){if(c){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+r+")",l.name="ChunkLoadError",l.type=n,l.request=r,c[1](l)}o[t]=void 0}};var b=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(e)},s.m=t,s.c=n,s.d=function(t,e,c){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:c})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var c=Object.create(null);if(s.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(c,n,function(e){return t[e]}.bind(null,n));return c},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/shop/",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=e,u=u.slice();for(var l=0;l<u.length;l++)e(u[l]);var b=d;a.push([0,"chunk-vendors"]),c()})({0:function(t,e,c){t.exports=c("56d7")},2947:function(t,e,c){"use strict";c("9c1a")},"56d7":function(t,e,c){"use strict";c.r(e);c("e260"),c("e6cf"),c("cca6"),c("a79d");var n=c("7a23"),r=c("bc3a"),o=c.n(r),a=c("130e"),i=c("8a14"),s=(c("fe26"),c("cd74"),c("7bb1")),u=c("3aa8"),d=c("cbdf"),l=c("9457");function b(t,e){var c=Object(n["H"])("router-view");return Object(n["x"])(),Object(n["e"])(c)}c("913b");var h=c("6b0d"),f=c.n(h);const p={},g=f()(p,[["render",b]]);var j=g,O=(c("d3b7"),c("3ca3"),c("ddb0"),c("6c02")),m=function(t){return Object(n["A"])("data-v-4d9de4ce"),t=t(),Object(n["y"])(),t},v={class:"container"},y={class:"d-lg-none"},k={class:"input-group"},x=m((function(){return Object(n["h"])("span",{class:"input-group-text",id:"basic-addon1"},[Object(n["h"])("i",{class:"bi bi-search"})],-1)})),P=m((function(){return Object(n["h"])("i",{class:"bi bi-x text-dark"},null,-1)})),w=[P],C=m((function(){return Object(n["h"])("option",{selected:"",value:""},"所有商品",-1)})),_=["value"],L={class:"d-flex align-items-center mt-3"},T=Object(n["i"])(" 排序： "),E=Object(n["i"])("價錢"),I=m((function(){return Object(n["h"])("i",{class:"bi bi-sort-up"},null,-1)})),S=[E,I],A=Object(n["i"])(" |  "),F=Object(n["i"])("價錢"),M=m((function(){return Object(n["h"])("i",{class:"bi bi-sort-down"},null,-1)})),U=[F,M],K={class:"row mt-3"},V={class:"col-lg-2"},W={class:"list-group d-none d-lg-block"},$=["onClick"],N={class:"col-lg-10"},q={class:"row mb-3 mt-3 mt-md-0 d-none d-lg-flex justify-content-between"},D={class:"col-md-4 d-flex align-items-center"},H=Object(n["i"])(" 排序： "),B=Object(n["i"])("價錢"),z=m((function(){return Object(n["h"])("i",{class:"bi bi-sort-up"},null,-1)})),J=[B,z],G=Object(n["i"])(" |  "),Q=Object(n["i"])("價錢"),R=m((function(){return Object(n["h"])("i",{class:"bi bi-sort-down"},null,-1)})),X=[Q,R],Y={class:"col-md-6 col-lg-4"},Z={class:"input-group position-relative"},tt=m((function(){return Object(n["h"])("span",{class:"input-group-text",id:"basic-addon1"},[Object(n["h"])("i",{class:"bi bi-search"})],-1)})),et=m((function(){return Object(n["h"])("i",{class:"bi bi-x text-dark"},null,-1)})),ct=[et],nt={class:"row"},rt={class:"card h-100"},ot=["src"],at={class:"card-body"},it={class:"card-title"},st={class:"card-text"},ut=Object(n["i"])("  "),dt={key:0,class:"text-danger"},lt={class:"btn-group btn-group-sm d-flex"},bt=["onClick"],ht=["disabled","onClick"],ft={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},pt=m((function(){return Object(n["h"])("span",{class:"visually-hidden"},"Loading...",-1)})),gt=[pt],jt=Object(n["i"])(" 加到購物車 ");function Ot(t,e,c,r,o,a){var i=Object(n["H"])("Loading");return Object(n["x"])(),Object(n["g"])(n["a"],null,[Object(n["j"])(i,{active:o.isLoading},null,8,["active"]),Object(n["h"])("div",v,[Object(n["h"])("div",y,[Object(n["h"])("div",k,[x,Object(n["V"])(Object(n["h"])("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=function(t){return o.searchProduct=t}),class:"form-control position-relative",placeholder:"請輸入商品名稱","aria-label":"Username","aria-describedby":"basic-addon1"},null,512),[[n["P"],o.searchProduct]]),Object(n["h"])("button",{type:"button",class:"btn btn-link text-decoration-none position-absolute product-search-clear",onClick:e[1]||(e[1]=function(t){return o.searchProduct=""})},w)]),Object(n["V"])(Object(n["h"])("select",{class:"form-select mt-3","onUpdate:modelValue":e[2]||(e[2]=function(t){return o.category=t}),onChange:e[3]||(e[3]=function(t){return a.checkCategory(o.category)})},[C,(Object(n["x"])(!0),Object(n["g"])(n["a"],null,Object(n["F"])(o.categorys,(function(t){return Object(n["x"])(),Object(n["g"])("option",{value:t,key:t},Object(n["K"])(t),9,_)})),128))],544),[[n["O"],o.category]]),Object(n["h"])("div",L,[T,Object(n["h"])("a",{href:"#",class:"text-decoration-none link-secondary",onClick:e[4]||(e[4]=Object(n["W"])((function(t){return a.sortProduct("up")}),["prevent"]))},S),A,Object(n["h"])("a",{href:"#",class:"text-decoration-none link-secondary",onClick:e[5]||(e[5]=Object(n["W"])((function(t){return a.sortProduct("down")}),["prevent"]))},U)])]),Object(n["h"])("div",K,[Object(n["h"])("div",V,[Object(n["h"])("ul",W,[Object(n["h"])("li",{class:Object(n["r"])(["list-group-item",{active:""==o.category}])},[Object(n["h"])("a",{class:Object(n["r"])(["text-decoration-none d-block",{"text-white":""==o.category}]),href:"#",onClick:e[6]||(e[6]=function(t){return a.checkCategory("")})},"所有商品",2)],2),(Object(n["x"])(!0),Object(n["g"])(n["a"],null,Object(n["F"])(o.categorys,(function(t){return Object(n["x"])(),Object(n["g"])("li",{class:Object(n["r"])(["list-group-item",{active:o.category==t}]),key:t},[Object(n["h"])("a",{class:Object(n["r"])(["text-decoration-none d-block",{"text-white":o.category==t}]),href:"#",onClick:function(e){return a.checkCategory(t)}},Object(n["K"])(t),11,$)],2)})),128))])]),Object(n["h"])("div",N,[Object(n["h"])("div",q,[Object(n["h"])("div",D,[H,Object(n["h"])("a",{href:"#",class:"text-decoration-none link-secondary",onClick:e[7]||(e[7]=Object(n["W"])((function(t){return a.sortProduct("up")}),["prevent"]))},J),G,Object(n["h"])("a",{href:"#",class:"text-decoration-none link-secondary",onClick:e[8]||(e[8]=Object(n["W"])((function(t){return a.sortProduct("down")}),["prevent"]))},X)]),Object(n["h"])("div",Y,[Object(n["h"])("div",Z,[tt,Object(n["V"])(Object(n["h"])("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=function(t){return o.searchProduct=t}),class:"form-control product-search",placeholder:"請輸入商品名稱","aria-label":"Username","aria-describedby":"basic-addon1"},null,512),[[n["P"],o.searchProduct]]),Object(n["h"])("button",{type:"button",class:"btn btn-link text-decoration-none position-absolute product-search-clear",onClick:e[10]||(e[10]=function(t){return o.searchProduct=""})},ct)])])]),Object(n["h"])("div",nt,[(Object(n["x"])(!0),Object(n["g"])(n["a"],null,Object(n["F"])(a.searchProducts,(function(t){return Object(n["x"])(),Object(n["g"])("div",{class:"col-md-6 col-lg-4 col-xl-3 mb-3",key:t.id},[Object(n["h"])("div",rt,[Object(n["h"])("img",{src:t.imageUrl,style:{width:"100%"}},null,8,ot),Object(n["h"])("div",at,[Object(n["h"])("h5",it,Object(n["K"])(t.title),1),Object(n["h"])("p",st,[Object(n["h"])("span",{class:Object(n["r"])(["text-danger",{"text-decoration-line-through":t.price!==t.origin_price,"text-muted":t.price!==t.origin_price}])},Object(n["K"])("$".concat(t.price)),3),ut,t.price!==t.origin_price?(Object(n["x"])(),Object(n["g"])("span",dt,Object(n["K"])("$".concat(t.origin_price)),1)):Object(n["f"])("",!0)]),Object(n["h"])("div",lt,[Object(n["h"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(e){return a.getProduct(t.id)}}," 查看更多 ",8,bt),Object(n["h"])("button",{type:"button",class:"btn btn-outline-danger",disabled:o.status.loadingItem==t.id,onClick:function(e){return a.addCart(t.id)}},[o.status.loadingItem==t.id?(Object(n["x"])(),Object(n["g"])("div",ft,gt)):Object(n["f"])("",!0),jt],8,ht)])])])])})),128))])])])])],64)}var mt=c("2909"),vt=(c("99af"),c("159b"),c("4de4"),c("4e82"),c("ac1f"),c("466d"),{data:function(){return{isLoading:!1,products:[],status:{loadingItem:""},categorys:[],category:"",filterProducts:[],searchProduct:"",sortType:""}},inject:["emitter"],created:function(){this.getProducts()},methods:{getProducts:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("timothy80617","/products/all");this.axios.get(e).then((function(e){t.products=Object(mt["a"])(e.data.products),t.filterProducts=t.products,t.products.forEach((function(e){t.getCategorys(e.category)})),t.isLoading=!1}))},getCategorys:function(t){var e=this.categorys.some((function(e){return e===t}));e||this.categorys.push(t)},checkCategory:function(t){this.category=t,this.filterProducts=""===t?this.products:this.products.filter((function(e){return e.category===t}))},getProduct:function(t){this.$router.push("/user/product/".concat(t))},addCart:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("timothy80617","/cart"),n={product_id:t,qty:1};this.status.loadingItem=t,this.axios.post(c,{data:n}).then((function(t){e.status.loadingItem="",t.data.success?e.emitter.emit("push-message",{style:"success",title:t.data.message}):e.emitter.emit("push-message",{style:"danger",title:t.data.message})}))},sortProduct:function(t){switch(this.sortType=t,t){case"up":this.filterProducts=this.filterProducts.sort((function(t,e){return t.price-e.price}));break;case"down":this.filterProducts=this.filterProducts.sort((function(t,e){return e.price-t.price}));break}}},computed:{searchProducts:function(){var t=this;return this.filterProducts.filter((function(e){return e.title.match(t.searchProduct)}))}}});c("2947");const yt=f()(vt,[["render",Ot],["__scopeId","data-v-4d9de4ce"]]);var kt=yt,xt=[{path:"/login",component:function(){return c.e("chunk-2d2086b7").then(c.bind(null,"a55b"))}},{path:"/dashboard",component:function(){return Promise.all([c.e("chunk-b7914530"),c.e("chunk-2d0e2308")]).then(c.bind(null,"7e48"))},children:[{path:"products",component:function(){return Promise.all([c.e("chunk-ad7fbcd0"),c.e("chunk-90062de2")]).then(c.bind(null,"e6dc"))}},{path:"coupons",component:function(){return Promise.all([c.e("chunk-ad7fbcd0"),c.e("chunk-445d0efa")]).then(c.bind(null,"f329"))}},{path:"orders",component:function(){return Promise.all([c.e("chunk-ad7fbcd0"),c.e("chunk-2d0ab565")]).then(c.bind(null,"159d"))}}]},{path:"/user",component:function(){return Promise.all([c.e("chunk-b7914530"),c.e("chunk-252cd720")]).then(c.bind(null,"b186"))},children:[{path:"/",name:"Home",component:kt},{path:"cart",component:function(){return c.e("chunk-378034bd").then(c.bind(null,"76db"))}},{path:"product/:productId",component:function(){return c.e("chunk-5caeaaa2").then(c.bind(null,"f962"))}},{path:"checkout/:orderId",component:function(){return c.e("chunk-7afd838d").then(c.bind(null,"0959"))}}]}],Pt=Object(O["a"])({history:Object(O["b"])(),routes:xt,linkActiveClass:"active"}),wt=Pt;c("5319"),c("b680");function Ct(t){var e=parseInt(t,10);return"".concat(e.toFixed(0).replace(/./g,(function(t,e,c){return e&&"."!==t&&(c.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t})))}function _t(t){var e=new Date(1e3*t);return e.toLocaleDateString()}function Lt(){var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("timothy80617","/cart");o.a.get(t).then((function(t){return t.data.data.carts.length}))}c("a15b");var Tt=c("cfb9"),Et=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"更新";if(t.success)Tt["a"].emit("push-message",{style:"success",title:"".concat(e,"成功")});else{var c="string"===typeof t.message?[t.message]:t.message;Tt["a"].emit("push-message",{style:"danger",title:"".concat(e,"失敗"),content:c.join("、")})}};Object(s["e"])("required",u["c"]),Object(s["e"])("email",u["a"]),Object(s["e"])("min",u["b"]),Object(s["d"])({generateMessage:Object(d["a"])({zh_TW:l}),validateOnInput:!0}),Object(d["b"])("zh_TW");var It=Object(n["d"])(j);It.config.globalProperties.$filters={currency:Ct,date:_t},It.config.globalProperties.$cartsTotal=Lt,It.config.globalProperties.$pushMessageState=Et,It.use(a["a"],o.a),It.use(wt),It.component("Loading",i["a"]),It.component("Form",s["c"]),It.component("Field",s["b"]),It.component("ErrorMessage",s["a"]),It.mount("#app")},"913b":function(t,e,c){"use strict";c("ffa4")},"9c1a":function(t,e,c){},cfb9:function(t,e,c){"use strict";var n=c("1344"),r=Object(n["a"])();e["a"]=r},ffa4:function(t,e,c){}});
//# sourceMappingURL=app.97023928.js.map