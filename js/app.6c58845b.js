(function(t){function e(e){for(var c,r,i=e[0],s=e[1],u=e[2],d=0,l=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&l.push(o[r][0]),o[r]=0;for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&(t[c]=s[c]);b&&b(e);while(l.length)l.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],c=!0,r=1;r<n.length;r++){var i=n[r];0!==o[i]&&(c=!1)}c&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var c={},r={app:0},o={app:0},a=[];function i(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-2d2086b7":"8ff83315","chunk-378034bd":"de42762b","chunk-44e12390":"1082f657","chunk-2d0e2308":"ba97b87b","chunk-49d0cebe":"9567d3bd","chunk-5caeaaa2":"4804ebd3","chunk-7afd838d":"f20bf0d2","chunk-ad7fbcd0":"cebece02","chunk-1ff738dc":"a19715b8","chunk-2d0ab565":"610b862e","chunk-445d0efa":"398261ef"}[t]+".js"}function s(e){if(c[e])return c[e].exports;var n=c[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n={"chunk-49d0cebe":1,"chunk-1ff738dc":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var c="css/"+({}[t]||t)+"."+{"chunk-2d2086b7":"31d6cfe0","chunk-378034bd":"31d6cfe0","chunk-44e12390":"31d6cfe0","chunk-2d0e2308":"31d6cfe0","chunk-49d0cebe":"90802958","chunk-5caeaaa2":"31d6cfe0","chunk-7afd838d":"31d6cfe0","chunk-ad7fbcd0":"31d6cfe0","chunk-1ff738dc":"475f97b2","chunk-2d0ab565":"31d6cfe0","chunk-445d0efa":"31d6cfe0"}[t]+".css",o=s.p+c,a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var u=a[i],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===c||d===o))return e()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){u=l[i],d=u.getAttribute("data-href");if(d===c||d===o)return e()}var b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.onload=e,b.onerror=function(e){var c=e&&e.target&&e.target.src||o,a=new Error("Loading CSS chunk "+t+" failed.\n("+c+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=c,delete r[t],b.parentNode.removeChild(b),n(a)},b.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(b)})).then((function(){r[t]=0})));var c=o[t];if(0!==c)if(c)e.push(c[2]);else{var a=new Promise((function(e,n){c=o[t]=[e,n]}));e.push(c[2]=a);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=i(t);var l=new Error;u=function(e){d.onerror=d.onload=null,clearTimeout(b);var n=o[t];if(0!==n){if(n){var c=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+c+": "+r+")",l.name="ChunkLoadError",l.type=c,l.request=r,n[1](l)}o[t]=void 0}};var b=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(e)},s.m=t,s.c=c,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)s.d(n,c,function(e){return t[e]}.bind(null,c));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/shop/",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=e,u=u.slice();for(var l=0;l<u.length;l++)e(u[l]);var b=d;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"55d9":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),r=n("bc3a"),o=n.n(r),a=n("130e"),i=n("8a14"),s=(n("fe26"),n("cd74"),n("7bb1")),u=n("3aa8"),d=n("cbdf"),l=n("9457");function b(t,e){var n=Object(c["H"])("router-view");return Object(c["x"])(),Object(c["e"])(n)}n("913b");var h=n("6b0d"),f=n.n(h);const p={},g=f()(p,[["render",b]]);var j=g,O=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),m=function(t){return Object(c["A"])("data-v-7d375c36"),t=t(),Object(c["y"])(),t},y={class:"container"},v={class:"d-lg-none"},k={class:"input-group"},x=m((function(){return Object(c["h"])("span",{class:"input-group-text",id:"basic-addon1"},[Object(c["h"])("i",{class:"bi bi-search"})],-1)})),P=m((function(){return Object(c["h"])("i",{class:"bi bi-x text-dark"},null,-1)})),C=[P],w=m((function(){return Object(c["h"])("option",{selected:"",value:""},"所有商品",-1)})),L=["value"],_={class:"d-flex align-items-center mt-3"},I=Object(c["i"])(" 排序： "),S=Object(c["i"])("價錢"),T=m((function(){return Object(c["h"])("i",{class:"bi bi-sort-up"},null,-1)})),E=[S,T],M=Object(c["i"])(" |  "),A=Object(c["i"])("價錢"),N=m((function(){return Object(c["h"])("i",{class:"bi bi-sort-down"},null,-1)})),F=[A,N],H={class:"row mt-3"},U={class:"col-lg-2"},K={class:"list-group d-none d-lg-block"},V=["onClick"],W={class:"col-lg-10"},$={class:"row mb-3 mt-3 mt-md-0 d-none d-lg-flex justify-content-between"},q={class:"col-md-4 d-flex align-items-center"},D=Object(c["i"])(" 排序： "),J=Object(c["i"])("價錢"),B=m((function(){return Object(c["h"])("i",{class:"bi bi-sort-up"},null,-1)})),z=[J,B],G=Object(c["i"])(" |  "),Q=Object(c["i"])("價錢"),R=m((function(){return Object(c["h"])("i",{class:"bi bi-sort-down"},null,-1)})),X=[Q,R],Y={class:"col-md-6 col-lg-4"},Z={class:"input-group position-relative"},tt=m((function(){return Object(c["h"])("span",{class:"input-group-text",id:"basic-addon1"},[Object(c["h"])("i",{class:"bi bi-search"})],-1)})),et=m((function(){return Object(c["h"])("i",{class:"bi bi-x text-dark"},null,-1)})),nt=[et],ct={class:"row"},rt={class:"card h-100"},ot=["src"],at={class:"card-body"},it={class:"card-title"},st={class:"d-flex justify-content-between"},ut={class:"card-text"},dt=Object(c["i"])("  "),lt={key:0,class:"text-danger"},bt=["onClick"],ht=["onClick"],ft={class:"btn-group btn-group-sm d-flex"},pt=["onClick"],gt=["disabled","onClick"],jt={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},Ot=m((function(){return Object(c["h"])("span",{class:"visually-hidden"},"Loading...",-1)})),mt=[Ot],yt=Object(c["i"])(" 加到購物車 ");function vt(t,e,n,r,o,a){var i=Object(c["H"])("Loading");return Object(c["x"])(),Object(c["g"])(c["a"],null,[Object(c["j"])(i,{active:o.isLoading},null,8,["active"]),Object(c["h"])("div",y,[Object(c["h"])("div",v,[Object(c["h"])("div",k,[x,Object(c["V"])(Object(c["h"])("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=function(t){return o.searchProduct=t}),class:"form-control position-relative",placeholder:"請輸入商品名稱","aria-label":"Username","aria-describedby":"basic-addon1"},null,512),[[c["P"],o.searchProduct]]),Object(c["h"])("button",{type:"button",class:"btn btn-link text-decoration-none position-absolute product-search-clear",onClick:e[1]||(e[1]=function(t){return o.searchProduct=""})},C)]),Object(c["V"])(Object(c["h"])("select",{class:"form-select mt-3","onUpdate:modelValue":e[2]||(e[2]=function(t){return o.category=t}),onChange:e[3]||(e[3]=function(t){return a.checkCategory(o.category)})},[w,(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["F"])(o.categorys,(function(t){return Object(c["x"])(),Object(c["g"])("option",{value:t,key:t},Object(c["K"])(t),9,L)})),128))],544),[[c["O"],o.category]]),Object(c["h"])("div",_,[I,Object(c["h"])("a",{href:"#",class:"text-decoration-none link-secondary",onClick:e[4]||(e[4]=Object(c["W"])((function(t){return a.sortProduct("up")}),["prevent"]))},E),M,Object(c["h"])("a",{href:"#",class:"text-decoration-none link-secondary",onClick:e[5]||(e[5]=Object(c["W"])((function(t){return a.sortProduct("down")}),["prevent"]))},F)])]),Object(c["h"])("div",H,[Object(c["h"])("div",U,[Object(c["h"])("ul",K,[Object(c["h"])("li",{class:Object(c["r"])(["list-group-item",{active:""==o.category}])},[Object(c["h"])("a",{class:Object(c["r"])(["text-decoration-none d-block",{"text-white":""==o.category}]),href:"#",onClick:e[6]||(e[6]=function(t){return a.checkCategory("")})},"所有商品",2)],2),(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["F"])(o.categorys,(function(t){return Object(c["x"])(),Object(c["g"])("li",{class:Object(c["r"])(["list-group-item",{active:o.category==t}]),key:t},[Object(c["h"])("a",{class:Object(c["r"])(["text-decoration-none d-block",{"text-white":o.category==t}]),href:"#",onClick:function(e){return a.checkCategory(t)}},Object(c["K"])(t),11,V)],2)})),128))])]),Object(c["h"])("div",W,[Object(c["h"])("div",$,[Object(c["h"])("div",q,[D,Object(c["h"])("a",{href:"#",class:"text-decoration-none link-secondary",onClick:e[7]||(e[7]=Object(c["W"])((function(t){return a.sortProduct("up")}),["prevent"]))},z),G,Object(c["h"])("a",{href:"#",class:"text-decoration-none link-secondary",onClick:e[8]||(e[8]=Object(c["W"])((function(t){return a.sortProduct("down")}),["prevent"]))},X)]),Object(c["h"])("div",Y,[Object(c["h"])("div",Z,[tt,Object(c["V"])(Object(c["h"])("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=function(t){return o.searchProduct=t}),class:"form-control product-search",placeholder:"請輸入商品名稱","aria-label":"Username","aria-describedby":"basic-addon1"},null,512),[[c["P"],o.searchProduct]]),Object(c["h"])("button",{type:"button",class:"btn btn-link text-decoration-none position-absolute product-search-clear",onClick:e[10]||(e[10]=function(t){return o.searchProduct=""})},nt)])])]),Object(c["h"])("div",ct,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["F"])(a.searchProducts,(function(t){return Object(c["x"])(),Object(c["g"])("div",{class:"col-md-6 col-lg-4 col-xl-3 mb-3",key:t.id},[Object(c["h"])("div",rt,[Object(c["h"])("img",{src:t.imageUrl,style:{width:"100%"}},null,8,ot),Object(c["h"])("div",at,[Object(c["h"])("h5",it,Object(c["K"])(t.title),1),Object(c["h"])("div",st,[Object(c["h"])("p",ut,[Object(c["h"])("span",{class:Object(c["r"])(["text-danger",{"text-decoration-line-through":t.price!==t.origin_price,"text-muted":t.price!==t.origin_price}])},Object(c["K"])("$".concat(t.price)),3),dt,t.price!==t.origin_price?(Object(c["x"])(),Object(c["g"])("span",lt,Object(c["K"])("$".concat(t.origin_price)),1)):Object(c["f"])("",!0)]),-1===a.isHeart(t.id)?(Object(c["x"])(),Object(c["g"])("i",{key:0,class:"bi bi-heart myheart",onClick:function(e){return a.addMyList(t.id)}},null,8,bt)):Object(c["f"])("",!0),-1!==a.isHeart(t.id)?(Object(c["x"])(),Object(c["g"])("i",{key:1,class:"bi bi-heart-fill myheart",onClick:function(e){return a.addMyList(t.id)}},null,8,ht)):Object(c["f"])("",!0)]),Object(c["h"])("div",ft,[Object(c["h"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(e){return a.getProduct(t.id)}}," 查看更多 ",8,pt),Object(c["h"])("button",{type:"button",class:"btn btn-outline-danger",disabled:o.status.loadingItem==t.id,onClick:function(e){return a.addCart(t.id)}},[o.status.loadingItem==t.id?(Object(c["x"])(),Object(c["g"])("div",jt,mt)):Object(c["f"])("",!0),yt],8,gt)])])])])})),128))])])])])],64)}var kt=n("2909"),xt=(n("99af"),n("159b"),n("4de4"),n("4e82"),n("c740"),n("a434"),n("e9c4"),n("ac1f"),n("466d"),{data:function(){return{isLoading:!1,products:[],status:{loadingItem:""},categorys:[],category:"",filterProducts:[],searchProduct:"",sortType:"",myList:JSON.parse(localStorage.getItem("myList"))||[]}},inject:["emitter"],created:function(){this.getProducts(),this.getCart()},methods:{getProducts:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("timothy80617","/products/all");this.axios.get(e).then((function(e){t.products=Object(kt["a"])(e.data.products),t.filterProducts=t.products,t.products.forEach((function(e){t.getCategorys(e.category)})),t.isLoading=!1}))},getCategorys:function(t){var e=this.categorys.some((function(e){return e===t}));e||this.categorys.push(t)},checkCategory:function(t){this.category=t,this.filterProducts=""===t?this.products:this.products.filter((function(e){return e.category===t}))},getProduct:function(t){this.$router.push("/user/product/".concat(t))},addCart:function(t){var e=this,n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("timothy80617","/cart"),c={product_id:t,qty:1};this.status.loadingItem=t,this.axios.post(n,{data:c}).then((function(t){e.status.loadingItem="",t.data.success?e.emitter.emit("push-message",{style:"success",title:t.data.message}):e.emitter.emit("push-message",{style:"danger",title:t.data.message})})),this.getCart()},getCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("timothy80617","/cart");this.axios.get(e).then((function(e){var n=e.data.data.carts.length;t.emitter.emit("getCartsNum",n)}))},sortProduct:function(t){switch(this.sortType=t,t){case"up":this.filterProducts=this.filterProducts.sort((function(t,e){return t.price-e.price}));break;case"down":this.filterProducts=this.filterProducts.sort((function(t,e){return e.price-t.price}));break}},addMyList:function(t){var e=this.myList.findIndex((function(e){return e===t}));-1===e?this.myList.push(t):this.myList.splice(e,1),localStorage.setItem("myList",JSON.stringify(this.myList))},isHeart:function(t){var e=this.myList.findIndex((function(e){return e===t}));return e}},computed:{searchProducts:function(){var t=this;return this.filterProducts.filter((function(e){return e.title.match(t.searchProduct)}))}}});n("9611");const Pt=f()(xt,[["render",vt],["__scopeId","data-v-7d375c36"]]);var Ct=Pt,wt=[{path:"/login",component:function(){return n.e("chunk-2d2086b7").then(n.bind(null,"a55b"))}},{path:"/dashboard",component:function(){return Promise.all([n.e("chunk-44e12390"),n.e("chunk-2d0e2308")]).then(n.bind(null,"7e48"))},children:[{path:"products",component:function(){return Promise.all([n.e("chunk-ad7fbcd0"),n.e("chunk-1ff738dc")]).then(n.bind(null,"e6dc"))}},{path:"coupons",component:function(){return Promise.all([n.e("chunk-ad7fbcd0"),n.e("chunk-445d0efa")]).then(n.bind(null,"f329"))}},{path:"orders",component:function(){return Promise.all([n.e("chunk-ad7fbcd0"),n.e("chunk-2d0ab565")]).then(n.bind(null,"159d"))}}]},{path:"/user",component:function(){return Promise.all([n.e("chunk-44e12390"),n.e("chunk-49d0cebe")]).then(n.bind(null,"b186"))},children:[{path:"/",name:"Home",component:Ct},{path:"cart",component:function(){return n.e("chunk-378034bd").then(n.bind(null,"76db"))}},{path:"product/:productId",component:function(){return n.e("chunk-5caeaaa2").then(n.bind(null,"f962"))}},{path:"checkout/:orderId",component:function(){return n.e("chunk-7afd838d").then(n.bind(null,"0959"))}}]}],Lt=Object(O["a"])({history:Object(O["b"])(),routes:wt,linkActiveClass:"active"}),_t=Lt;n("5319"),n("b680");function It(t){var e=parseInt(t,10);return"".concat(e.toFixed(0).replace(/./g,(function(t,e,n){return e&&"."!==t&&(n.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t})))}function St(t){var e=new Date(1e3*t);return e.toLocaleDateString()}function Tt(){var t=function(){return new Promise((function(t){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("timothy80617","/cart");o.a.get(e).then((function(e){t(e.data.data.carts.length)}))}))};t().then((function(t){return console.log(t),t}))}n("a15b");var Et=n("cfb9"),Mt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"更新";if(t.success)Et["a"].emit("push-message",{style:"success",title:"".concat(e,"成功")});else{var n="string"===typeof t.message?[t.message]:t.message;Et["a"].emit("push-message",{style:"danger",title:"".concat(e,"失敗"),content:n.join("、")})}};Object(s["e"])("required",u["c"]),Object(s["e"])("email",u["a"]),Object(s["e"])("min",u["b"]),Object(s["d"])({generateMessage:Object(d["a"])({zh_TW:l}),validateOnInput:!0}),Object(d["b"])("zh_TW");var At=Object(c["d"])(j);At.config.globalProperties.$filters={currency:It,date:St},At.config.globalProperties.$cartsTotal=Tt,At.config.globalProperties.$pushMessageState=Mt,At.use(a["a"],o.a),At.use(_t),At.component("Loading",i["a"]),At.component("Form",s["c"]),At.component("Field",s["b"]),At.component("ErrorMessage",s["a"]),At.mount("#app")},"913b":function(t,e,n){"use strict";n("ffa4")},9611:function(t,e,n){"use strict";n("55d9")},cfb9:function(t,e,n){"use strict";var c=n("1344"),r=Object(c["a"])();e["a"]=r},ffa4:function(t,e,n){}});
//# sourceMappingURL=app.6c58845b.js.map